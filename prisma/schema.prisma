// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model usuario {
  id           Int           @id @default(autoincrement())
  email        String        @unique
  password     String
  role         Rol
  created_at   DateTime      @default(now())
  updated_at   DateTime      @updatedAt
  dispositivos dispositivo[]
}

model dispositivo {
  id             Int               @id @default(autoincrement())
  usuario_id     Int
  udid           String
  device_type    TipoDispositivo
  status         EstadoDispositivo @default(INACTIVO)
  version_so     String
  marca          String
  connected_at   DateTime          @default(now())
  last_activity  DateTime?
  usuario        usuario           @relation(fields: [usuario_id], references: [id])
  cuentas_google cuenta_google[]
}

model cuenta_google {
  id                Int                 @id @default(autoincrement())
  dispositivo_id    Int
  email             String              @unique
  status            EstadoCuentaGoogle  @default(ACTIVO)
  dispositivo       dispositivo         @relation(fields: [dispositivo_id], references: [id])
  cuenta_red_social cuenta_red_social[]
}

model red_social {
  id                Int                 @id @default(autoincrement())
  name              RedesSociales
  cuenta_red_social cuenta_red_social[]
}

model cuenta_red_social {
  id                       Int                       @id @default(autoincrement())
  red_social_id            Int
  cuenta_google_id         Int
  username                 String?
  status                   EstadoCuentaRedSocial     @default(ACTIVO)
  created_at               DateTime                  @default(now())
  cuenta_google            cuenta_google             @relation(fields: [cuenta_google_id], references: [id])
  red_social               red_social                @relation(fields: [red_social_id], references: [id])
  int_programadas_tiktok   int_programada_tiktok[]
  int_programadas_facebook int_programada_facebook[]
}

model int_programada_tiktok {
  id                        Int                     @id @default(autoincrement())
  cuenta_red_social_id      Int
  url_video                 String
  views_count               Int
  liked                     Boolean                 @default(false)
  saved                     Boolean                 @default(false)
  comment                   String?
  status                    EstadoInteraccionTikTok @default(PENDIENTE)
  created_at                DateTime                @default(now())
  finished_at               DateTime?
  cuenta_red_social         cuenta_red_social       @relation(fields: [cuenta_red_social_id], references: [id])
  hist_interacciones_tiktok hist_int_tiktok[]
}

model int_programada_facebook {
  id                          Int                       @id @default(autoincrement())
  cuenta_red_social_id        Int
  url_post                    String
  liked                       Boolean                   @default(false)
  comment                     String?
  shared_groups_count         Int                       @default(0)
  time_between_posts          Int                       @default(0)
  status                      EstadoInteraccionFacebook @default(PENDIENTE)
  created_at                  DateTime                  @default(now())
  finished_at                 DateTime?
  cuenta_red_social           cuenta_red_social         @relation(fields: [cuenta_red_social_id], references: [id])
  hist_interacciones_facebook hist_int_facebook[]
}

model hist_int_tiktok {
  id                       Int                   @id @default(autoincrement())
  int_programada_tiktok_id Int
  tiktok_account_name      String?
  status                   EstadoHistorialTikTok
  total_views              Int                   @default(0)
  liked                    Boolean               @default(false)
  video_saved              Boolean               @default(false)
  commented                Boolean               @default(false)
  finished_at              DateTime?
  int_programada_tiktok    int_programada_tiktok @relation(fields: [int_programada_tiktok_id], references: [id])
}

model hist_int_facebook {
  id                         Int                     @id @default(autoincrement())
  int_programada_facebook_id Int
  status                     EstadoHistorialFacebook
  shared_groups              Int                     @default(0)
  liked                      Boolean                 @default(false)
  commented                  Boolean                 @default(false)
  finished_at                DateTime?
  int_programada_facebook    int_programada_facebook @relation(fields: [int_programada_facebook_id], references: [id])
}

enum Rol {
  ADMINISTRADOR
  PERSONAL
}

enum TipoDispositivo {
  F√çSICO
  EMULADOR
}

enum Conexion {
  USB
  WIFI
}

enum EstadoDispositivo {
  ACTIVO
  INACTIVO
}

enum EstadoCuentaGoogle {
  ACTIVO
  INACTIVO
  BANEADO
}

enum EstadoCuentaRedSocial {
  ACTIVO
  INACTIVO
  SUSPENDIDO
  BANEADO
}

enum EstadoInteraccionTikTok {
  PENDIENTE
  EN_PROGRESO
  COMPLETADA
  FALLIDA
}

enum EstadoInteraccionFacebook {
  PENDIENTE
  EN_PROGRESO
  COMPLETADA
  FALLIDA
}

enum EstadoHistorialTikTok {
  COMPLETADA
  FALLIDA
}

enum EstadoHistorialFacebook {
  COMPLETADA
  FALLIDA
}

enum RedesSociales {
  TIKTOK
  FACEBOOK
}
